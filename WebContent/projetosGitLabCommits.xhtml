<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:body>
	<ui:composition template="template/common/commonLayout.xhtml">
		<ui:define name="content">
			<h:form id="form">
				<p:growl id="msgs" />
				<p:outputLabel for="projectsList" value="Projetos:" />
				<p:selectOneListbox id="projectsList"
					value="#{projetoMB.gitLabProjects}" var="p" filter="true"
					filterMatchMode="contains">
					<f:selectItems value="#{projetoMB.gitLabProjects}" var="p"
						itemLabel="#{p.name}" itemValue="#{p}" />
					<p:column>
						<h:outputText value="#{p.name}" />
					</p:column>
				</p:selectOneListbox>
				<p:panel id="groupsCommits" header="Commiters"
					toggleable="true" closable="true" toggleSpeed="500"
					closeSpeed="500" widgetVar="panel" style="margin-bottom:50px">

					<p:dataTable value="#{projetoMB.gitLabCommits}" var="c">
						<p:column>
							<f:facet name="header">
								<h:outputText value="Autor" />
							</f:facet>
							<h:outputText value="#{c.authorName}" />
						</p:column>		
						<p:column>
							<f:facet name="header">
								<h:outputText value="Titulo" />
							</f:facet>
							<h:outputText value="#{c.title}" />
						</p:column>		
					</p:dataTable>	
					<p:ajax event="close" listener="#{panelView.onClose}" update="msgs" />
					<p:ajax event="toggle" listener="#{panelView.onToggle}"
						update="msgs" />

					<p:chart type="pie" model="#{projetoMB.pieModel}"
						style="height:500px; width:500px" />

					<f:facet name="options">
						<p:menu>
							<p:submenu label="Settings">
								<p:menuitem value="Toggle" url="#" icon="ui-icon-newwin"
									onclick="PF('panel').toggle()" />
								<p:menuitem value="Remove" url="#" icon="ui-icon-close"
									onclick="PF('panel').close()" />
							</p:submenu>
						</p:menu>
					</f:facet>
				</p:panel>
				
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>